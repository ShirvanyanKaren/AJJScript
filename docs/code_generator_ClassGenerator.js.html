<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: code_generator/ClassGenerator.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: code_generator/ClassGenerator.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * ClassGenerator.js
 *
 * Responsible for generating class definitions, constructors, and methods.
 */


function generateClassDef(classDef, ctx) {
    const {
      appendLine,
      indentLevelCallback,
      declaredVariables,
      classTable,
      generateParams,
      generateExpression,
      generateStatement,
    } = ctx;
  
    ctx.currentClass = classDef.name;
  
    // Class declaration
    if (classDef.superclass) {
      appendLine(
        `const ${classDef.name} = AJJ.createClass('${classDef.name}', ${classDef.superclass});`
      );
    } else {
      appendLine(`const ${classDef.name} = AJJ.createClass('${classDef.name}');`);
    }
  
    // Constructor
    const params = classDef.constructor?.params || [];
    appendLine(
      `${classDef.name}.prototype.init = function(${generateParams(params)}) {`
    );
    indentLevelCallback(1);
  
    for (const param of params) declaredVariables.add(param.identifier);
    for (const varDec of classDef.varDecs || []) {
      appendLine(`this.${varDec.identifier} = null;`);
    }
  
    if (classDef.constructor?.superCall) {
      const superClass = classDef.superclass &amp;&amp; classTable.get(classDef.superclass);
      const superParamCount = superClass?.constructor?.params?.length || 0;
      const superArgs = params.slice(0, superParamCount).map(p => p.identifier).join(", ");
      appendLine(`Object.getPrototypeOf(${classDef.name}.prototype).init.call(this, ${superArgs});`);
    }
  
    for (const stmt of classDef.constructor?.body || []) {
      generateStatement(stmt, ctx);
    }
  
    indentLevelCallback(-1);
    appendLine("};");
  
    // Methods
    for (const method of classDef.methods) {
      appendLine(`${classDef.name}.prototype.${method.name} = function(${generateParams(method.params)}) {`);
      indentLevelCallback(1);
  
      for (const param of method.params) declaredVariables.add(param.identifier);
      for (const stmt of method.body) {
        generateStatement(stmt, ctx);
      }
  
      indentLevelCallback(-1);
      appendLine("};");
      declaredVariables.clear();
    }
  
    ctx.currentClass = null;
  }
  
  module.exports = { generateClassDef };
  </code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="global.html#CodeGenerator">CodeGenerator</a></li><li><a href="Parser.html">Parser</a></li><li><a href="Tokenizer.html">Tokenizer</a></li><li><a href="TypeChecker.html">TypeChecker</a></li></ul><h3>Global</h3><ul><li><a href="global.html#compileAndRun">compileAndRun</a></li><li><a href="global.html#generateClassDef">generateClassDef</a></li><li><a href="global.html#generateCode">generateCode</a></li><li><a href="global.html#generateExpression">generateExpression</a></li><li><a href="global.html#generateStatement">generateStatement</a></li><li><a href="global.html#parseClassDef">parseClassDef</a></li><li><a href="global.html#parseConstructor">parseConstructor</a></li><li><a href="global.html#parseMethodDef">parseMethodDef</a></li><li><a href="global.html#parseVarDec">parseVarDec</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun May 18 2025 21:18:27 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
